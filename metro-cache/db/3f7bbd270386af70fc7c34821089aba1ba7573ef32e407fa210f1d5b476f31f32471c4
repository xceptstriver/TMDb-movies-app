{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false,"locs":[]}},{"name":"react","data":{"isAsync":false,"locs":[]}},{"name":"./NavigationContext","data":{"isAsync":false,"locs":[]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useFocusEvents;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[1], \"react\"));\n\n  var _NavigationContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"./NavigationContext\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function useFocusEvents(_ref) {\n    var state = _ref.state,\n        emitter = _ref.emitter;\n    var navigation = React.useContext(_NavigationContext.default);\n    var lastFocusedKeyRef = React.useRef();\n    var currentFocusedKey = state.routes[state.index].key;\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('focus', function () {\n        lastFocusedKeyRef.current = currentFocusedKey;\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      return navigation == null ? void 0 : navigation.addListener('blur', function () {\n        lastFocusedKeyRef.current = undefined;\n        emitter.emit({\n          type: 'blur',\n          target: currentFocusedKey\n        });\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n    React.useEffect(function () {\n      var lastFocusedKey = lastFocusedKeyRef.current;\n      lastFocusedKeyRef.current = currentFocusedKey;\n\n      if (lastFocusedKey === undefined && !navigation) {\n        emitter.emit({\n          type: 'focus',\n          target: currentFocusedKey\n        });\n      }\n\n      if (lastFocusedKey === currentFocusedKey || !(navigation ? navigation.isFocused() : true)) {\n        return;\n      }\n\n      if (lastFocusedKey === undefined) {\n        return;\n      }\n\n      emitter.emit({\n        type: 'blur',\n        target: lastFocusedKey\n      });\n      emitter.emit({\n        type: 'focus',\n        target: currentFocusedKey\n      });\n    }, [currentFocusedKey, emitter, navigation]);\n  }\n});","lineCount":70,"map":[[9,0,1,0],[11,0,3,0],[17,0,15,15],[17,11,15,24,"useFocusEvents"],[17,25,15,15],[17,32,18,19],[18,0,18,19],[18,8,16,2,"state"],[18,13,18,19],[18,21,16,2,"state"],[18,26,18,19],[19,0,18,19],[19,8,17,2,"emitter"],[19,15,18,19],[19,23,17,2,"emitter"],[19,30,18,19],[20,0,19,2],[20,8,19,8,"navigation"],[20,18,19,18],[20,21,19,21,"React"],[20,26,19,26],[20,27,19,27,"useContext"],[20,37,19,21],[20,38,19,38,"NavigationContext"],[20,64,19,21],[20,65,19,2],[21,0,20,2],[21,8,20,8,"lastFocusedKeyRef"],[21,25,20,25],[21,28,20,28,"React"],[21,33,20,33],[21,34,20,34,"useRef"],[21,40,20,28],[21,42,20,2],[22,0,22,2],[22,8,22,8,"currentFocusedKey"],[22,25,22,25],[22,28,22,28,"state"],[22,33,22,33],[22,34,22,34,"routes"],[22,40,22,28],[22,41,22,41,"state"],[22,46,22,46],[22,47,22,47,"index"],[22,52,22,28],[22,54,22,54,"key"],[22,57,22,2],[23,0,26,2,"React"],[23,4,26,2,"React"],[23,9,26,7],[23,10,26,8,"useEffect"],[23,19,26,2],[23,20,27,4],[24,0,27,4],[24,13,28,6,"navigation"],[24,23,27,4],[24,43,28,6,"navigation"],[24,53,28,16],[24,54,28,18,"addListener"],[24,65,28,6],[24,66,28,30],[24,73,28,6],[24,75,28,39],[24,87,28,45],[25,0,29,8,"lastFocusedKeyRef"],[25,8,29,8,"lastFocusedKeyRef"],[25,25,29,25],[25,26,29,26,"current"],[25,33,29,8],[25,36,29,36,"currentFocusedKey"],[25,53,29,8],[26,0,30,8,"emitter"],[26,8,30,8,"emitter"],[26,15,30,15],[26,16,30,16,"emit"],[26,20,30,8],[26,21,30,21],[27,0,30,23,"type"],[27,10,30,23,"type"],[27,14,30,27],[27,16,30,29],[27,23,30,21],[28,0,30,38,"target"],[28,10,30,38,"target"],[28,16,30,44],[28,18,30,46,"currentFocusedKey"],[29,0,30,21],[29,9,30,8],[30,0,31,7],[30,7,28,6],[30,8,27,4],[31,0,27,4],[31,5,26,2],[31,7,32,4],[31,8,32,5,"currentFocusedKey"],[31,25,32,4],[31,27,32,24,"emitter"],[31,34,32,4],[31,36,32,33,"navigation"],[31,46,32,4],[31,47,26,2],[32,0,35,2,"React"],[32,4,35,2,"React"],[32,9,35,7],[32,10,35,8,"useEffect"],[32,19,35,2],[32,20,36,4],[33,0,36,4],[33,13,37,6,"navigation"],[33,23,36,4],[33,43,37,6,"navigation"],[33,53,37,16],[33,54,37,18,"addListener"],[33,65,37,6],[33,66,37,30],[33,72,37,6],[33,74,37,38],[33,86,37,44],[34,0,38,8,"lastFocusedKeyRef"],[34,8,38,8,"lastFocusedKeyRef"],[34,25,38,25],[34,26,38,26,"current"],[34,33,38,8],[34,36,38,36,"undefined"],[34,45,38,8],[35,0,39,8,"emitter"],[35,8,39,8,"emitter"],[35,15,39,15],[35,16,39,16,"emit"],[35,20,39,8],[35,21,39,21],[36,0,39,23,"type"],[36,10,39,23,"type"],[36,14,39,27],[36,16,39,29],[36,22,39,21],[37,0,39,37,"target"],[37,10,39,37,"target"],[37,16,39,43],[37,18,39,45,"currentFocusedKey"],[38,0,39,21],[38,9,39,8],[39,0,40,7],[39,7,37,6],[39,8,36,4],[40,0,36,4],[40,5,35,2],[40,7,41,4],[40,8,41,5,"currentFocusedKey"],[40,25,41,4],[40,27,41,24,"emitter"],[40,34,41,4],[40,36,41,33,"navigation"],[40,46,41,4],[40,47,35,2],[41,0,44,2,"React"],[41,4,44,2,"React"],[41,9,44,7],[41,10,44,8,"useEffect"],[41,19,44,2],[41,20,44,18],[41,32,44,24],[42,0,45,4],[42,10,45,10,"lastFocusedKey"],[42,24,45,24],[42,27,45,27,"lastFocusedKeyRef"],[42,44,45,44],[42,45,45,45,"current"],[42,52,45,4],[43,0,47,4,"lastFocusedKeyRef"],[43,6,47,4,"lastFocusedKeyRef"],[43,23,47,21],[43,24,47,22,"current"],[43,31,47,4],[43,34,47,32,"currentFocusedKey"],[43,51,47,4],[45,0,51,4],[45,10,51,8,"lastFocusedKey"],[45,24,51,22],[45,29,51,27,"undefined"],[45,38,51,8],[45,42,51,40],[45,43,51,41,"navigation"],[45,53,51,4],[45,55,51,53],[46,0,52,6,"emitter"],[46,8,52,6,"emitter"],[46,15,52,13],[46,16,52,14,"emit"],[46,20,52,6],[46,21,52,19],[47,0,52,21,"type"],[47,10,52,21,"type"],[47,14,52,25],[47,16,52,27],[47,23,52,19],[48,0,52,36,"target"],[48,10,52,36,"target"],[48,16,52,42],[48,18,52,44,"currentFocusedKey"],[49,0,52,19],[49,9,52,6],[50,0,53,5],[52,0,57,4],[52,10,58,6,"lastFocusedKey"],[52,24,58,20],[52,29,58,25,"currentFocusedKey"],[52,46,58,6],[52,50,59,6],[52,52,59,8,"navigation"],[52,62,59,18],[52,65,59,21,"navigation"],[52,75,59,31],[52,76,59,32,"isFocused"],[52,85,59,21],[52,87,59,18],[52,90,59,46],[52,94,59,6],[52,95,57,4],[52,97,60,6],[53,0,61,6],[54,0,62,5],[56,0,64,4],[56,10,64,8,"lastFocusedKey"],[56,24,64,22],[56,29,64,27,"undefined"],[56,38,64,4],[56,40,64,38],[57,0,66,6],[58,0,67,5],[60,0,69,4,"emitter"],[60,6,69,4,"emitter"],[60,13,69,11],[60,14,69,12,"emit"],[60,18,69,4],[60,19,69,17],[61,0,69,19,"type"],[61,8,69,19,"type"],[61,12,69,23],[61,14,69,25],[61,20,69,17],[62,0,69,33,"target"],[62,8,69,33,"target"],[62,14,69,39],[62,16,69,41,"lastFocusedKey"],[63,0,69,17],[63,7,69,4],[64,0,70,4,"emitter"],[64,6,70,4,"emitter"],[64,13,70,11],[64,14,70,12,"emit"],[64,18,70,4],[64,19,70,17],[65,0,70,19,"type"],[65,8,70,19,"type"],[65,12,70,23],[65,14,70,25],[65,21,70,17],[66,0,70,34,"target"],[66,8,70,34,"target"],[66,14,70,40],[66,16,70,42,"currentFocusedKey"],[67,0,70,17],[67,7,70,4],[68,0,71,3],[68,5,44,2],[68,7,71,5],[68,8,71,6,"currentFocusedKey"],[68,25,71,5],[68,27,71,25,"emitter"],[68,34,71,5],[68,36,71,34,"navigation"],[68,46,71,5],[68,47,44,2],[69,0,72,1]],"functionMap":{"names":["<global>","useFocusEvents","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;eCc;ICY;uCCC;ODG,CD;ICK;sCCC;ODG,CD;kBCI;GD2B;CDC"}},"type":"js/module"}]}