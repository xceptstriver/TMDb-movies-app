{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false,"locs":[]}},{"name":"react","data":{"isAsync":false,"locs":[]}},{"name":"./NavigationStateContext","data":{"isAsync":false,"locs":[]}},{"name":"./NavigationBuilderContext","data":{"isAsync":false,"locs":[]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useOptionsGetters;\n\n  var React = _interopRequireWildcard(_$$_REQUIRE(_dependencyMap[1], \"react\"));\n\n  var _NavigationStateContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"./NavigationStateContext\"));\n\n  var _NavigationBuilderContext = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./NavigationBuilderContext\"));\n\n  function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\n  function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\n  function useOptionsGetters(_ref) {\n    var key = _ref.key,\n        options = _ref.options,\n        navigation = _ref.navigation;\n    var optionsRef = React.useRef(options);\n    var optionsGettersFromChildRef = React.useRef({});\n\n    var _React$useContext = React.useContext(_NavigationBuilderContext.default),\n        onOptionsChange = _React$useContext.onOptionsChange;\n\n    var _React$useContext2 = React.useContext(_NavigationStateContext.default),\n        parentAddOptionsGetter = _React$useContext2.addOptionsGetter;\n\n    var optionsChangeListener = React.useCallback(function () {\n      var _navigation$isFocused;\n\n      var isFocused = (_navigation$isFocused = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused : true;\n      var hasChildren = Object.keys(optionsGettersFromChildRef.current).length;\n\n      if (isFocused && !hasChildren) {\n        var _optionsRef$current;\n\n        onOptionsChange((_optionsRef$current = optionsRef.current) != null ? _optionsRef$current : {});\n      }\n    }, [navigation, onOptionsChange]);\n    React.useEffect(function () {\n      optionsRef.current = options;\n      optionsChangeListener();\n      return navigation == null ? void 0 : navigation.addListener('focus', optionsChangeListener);\n    }, [navigation, options, optionsChangeListener]);\n    var getOptionsFromListener = React.useCallback(function () {\n      for (var _key in optionsGettersFromChildRef.current) {\n        if (optionsGettersFromChildRef.current.hasOwnProperty(_key)) {\n          var _optionsGettersFromCh, _optionsGettersFromCh2;\n\n          var result = (_optionsGettersFromCh = (_optionsGettersFromCh2 = optionsGettersFromChildRef.current)[_key]) == null ? void 0 : _optionsGettersFromCh.call(_optionsGettersFromCh2);\n\n          if (result !== null) {\n            return result;\n          }\n        }\n      }\n\n      return null;\n    }, []);\n    var getCurrentOptions = React.useCallback(function () {\n      var _navigation$isFocused2;\n\n      var isFocused = (_navigation$isFocused2 = navigation == null ? void 0 : navigation.isFocused()) != null ? _navigation$isFocused2 : true;\n\n      if (!isFocused) {\n        return null;\n      }\n\n      var optionsFromListener = getOptionsFromListener();\n\n      if (optionsFromListener !== null) {\n        return optionsFromListener;\n      }\n\n      return optionsRef.current;\n    }, [navigation, getOptionsFromListener]);\n    React.useEffect(function () {\n      return parentAddOptionsGetter == null ? void 0 : parentAddOptionsGetter(key, getCurrentOptions);\n    }, [getCurrentOptions, parentAddOptionsGetter, key]);\n    var addOptionsGetter = React.useCallback(function (key, getter) {\n      optionsGettersFromChildRef.current[key] = getter;\n      optionsChangeListener();\n      return function () {\n        delete optionsGettersFromChildRef.current[key];\n        optionsChangeListener();\n      };\n    }, [optionsChangeListener]);\n    return {\n      addOptionsGetter: addOptionsGetter,\n      getCurrentOptions: getCurrentOptions\n    };\n  }\n});","lineCount":97,"map":[[9,0,1,0],[11,0,3,0],[13,0,4,0],[19,0,13,15],[19,11,13,24,"useOptionsGetters"],[19,28,13,15],[19,35,17,12],[20,0,17,12],[20,8,14,2,"key"],[20,11,17,12],[20,19,14,2,"key"],[20,22,17,12],[21,0,17,12],[21,8,15,2,"options"],[21,15,17,12],[21,23,15,2,"options"],[21,30,17,12],[22,0,17,12],[22,8,16,2,"navigation"],[22,18,17,12],[22,26,16,2,"navigation"],[22,36,17,12],[23,0,18,2],[23,8,18,8,"optionsRef"],[23,18,18,18],[23,21,18,21,"React"],[23,26,18,26],[23,27,18,27,"useRef"],[23,33,18,21],[23,34,18,54,"options"],[23,41,18,21],[23,42,18,2],[24,0,19,2],[24,8,19,8,"optionsGettersFromChildRef"],[24,34,19,34],[24,37,19,37,"React"],[24,42,19,42],[24,43,19,43,"useRef"],[24,49,19,37],[24,50,21,4],[24,52,19,37],[24,53,19,2],[26,0,23,2],[26,28,23,30,"React"],[26,33,23,35],[26,34,23,36,"useContext"],[26,44,23,30],[26,45,23,47,"NavigationBuilderContext"],[26,78,23,30],[26,79,23,2],[27,0,23,2],[27,8,23,10,"onOptionsChange"],[27,23,23,2],[27,44,23,10,"onOptionsChange"],[27,59,23,2],[29,0,24,2],[29,29,24,55,"React"],[29,34,24,60],[29,35,24,61,"useContext"],[29,45,24,55],[29,46,25,4,"NavigationStateContext"],[29,77,24,55],[29,78,24,2],[30,0,24,2],[30,8,24,28,"parentAddOptionsGetter"],[30,30,24,2],[30,52,24,10,"addOptionsGetter"],[30,68,24,2],[32,0,28,2],[32,8,28,8,"optionsChangeListener"],[32,29,28,29],[32,32,28,32,"React"],[32,37,28,37],[32,38,28,38,"useCallback"],[32,49,28,32],[32,50,28,50],[32,62,28,56],[33,0,28,56],[35,0,29,4],[35,10,29,10,"isFocused"],[35,19,29,19],[35,47,29,22,"navigation"],[35,57,29,19],[35,77,29,22,"navigation"],[35,87,29,32],[35,88,29,34,"isFocused"],[35,97,29,22],[35,99,29,19],[35,135,29,49],[35,139,29,4],[36,0,30,4],[36,10,30,10,"hasChildren"],[36,21,30,21],[36,24,30,24,"Object"],[36,30,30,30],[36,31,30,31,"keys"],[36,35,30,24],[36,36,30,36,"optionsGettersFromChildRef"],[36,62,30,62],[36,63,30,63,"current"],[36,70,30,24],[36,72,30,72,"length"],[36,78,30,4],[38,0,32,4],[38,10,32,8,"isFocused"],[38,19,32,17],[38,23,32,21],[38,24,32,22,"hasChildren"],[38,35,32,4],[38,37,32,35],[39,0,32,35],[41,0,33,6,"onOptionsChange"],[41,8,33,6,"onOptionsChange"],[41,23,33,21],[41,47,33,22,"optionsRef"],[41,57,33,32],[41,58,33,33,"current"],[41,65,33,21],[41,99,33,44],[41,101,33,21],[41,102,33,6],[42,0,34,5],[43,0,35,3],[43,5,28,32],[43,7,35,5],[43,8,35,6,"navigation"],[43,18,35,5],[43,20,35,18,"onOptionsChange"],[43,35,35,5],[43,36,28,32],[43,37,28,2],[44,0,37,2,"React"],[44,4,37,2,"React"],[44,9,37,7],[44,10,37,8,"useEffect"],[44,19,37,2],[44,20,37,18],[44,32,37,24],[45,0,38,4,"optionsRef"],[45,6,38,4,"optionsRef"],[45,16,38,14],[45,17,38,15,"current"],[45,24,38,4],[45,27,38,25,"options"],[45,34,38,4],[46,0,39,4,"optionsChangeListener"],[46,6,39,4,"optionsChangeListener"],[46,27,39,25],[47,0,41,4],[47,13,41,11,"navigation"],[47,23,41,4],[47,43,41,11,"navigation"],[47,53,41,21],[47,54,41,23,"addListener"],[47,65,41,11],[47,66,41,35],[47,73,41,11],[47,75,41,44,"optionsChangeListener"],[47,96,41,11],[47,97,41,4],[48,0,42,3],[48,5,37,2],[48,7,42,5],[48,8,42,6,"navigation"],[48,18,42,5],[48,20,42,18,"options"],[48,27,42,5],[48,29,42,27,"optionsChangeListener"],[48,50,42,5],[48,51,37,2],[49,0,44,2],[49,8,44,8,"getOptionsFromListener"],[49,30,44,30],[49,33,44,33,"React"],[49,38,44,38],[49,39,44,39,"useCallback"],[49,50,44,33],[49,51,44,51],[49,63,44,57],[50,0,45,4],[50,11,45,9],[50,15,45,13,"key"],[50,19,45,4],[50,23,45,20,"optionsGettersFromChildRef"],[50,49,45,46],[50,50,45,47,"current"],[50,57,45,4],[50,59,45,56],[51,0,46,6],[51,12,46,10,"optionsGettersFromChildRef"],[51,38,46,36],[51,39,46,37,"current"],[51,46,46,10],[51,47,46,45,"hasOwnProperty"],[51,61,46,10],[51,62,46,60,"key"],[51,66,46,10],[51,67,46,6],[51,69,46,66],[52,0,46,66],[54,0,47,8],[54,14,47,14,"result"],[54,20,47,20],[54,48,47,23],[54,74,47,23,"optionsGettersFromChildRef"],[54,100,47,49],[54,101,47,50,"current"],[54,108,47,23],[54,110,47,58,"key"],[54,114,47,23],[54,115,47,20],[54,136,47,23],[54,186,47,8],[56,0,50,8],[56,14,50,12,"result"],[56,20,50,18],[56,25,50,23],[56,29,50,8],[56,31,50,29],[57,0,51,10],[57,19,51,17,"result"],[57,25,51,10],[58,0,52,9],[59,0,53,7],[60,0,54,5],[62,0,56,4],[62,13,56,11],[62,17,56,4],[63,0,57,3],[63,5,44,33],[63,7,57,5],[63,9,44,33],[63,10,44,2],[64,0,59,2],[64,8,59,8,"getCurrentOptions"],[64,25,59,25],[64,28,59,28,"React"],[64,33,59,33],[64,34,59,34,"useCallback"],[64,45,59,28],[64,46,59,46],[64,58,59,52],[65,0,59,52],[67,0,60,4],[67,10,60,10,"isFocused"],[67,19,60,19],[67,48,60,22,"navigation"],[67,58,60,19],[67,78,60,22,"navigation"],[67,88,60,32],[67,89,60,34,"isFocused"],[67,98,60,22],[67,100,60,19],[67,137,60,49],[67,141,60,4],[69,0,62,4],[69,10,62,8],[69,11,62,9,"isFocused"],[69,20,62,4],[69,22,62,20],[70,0,63,6],[70,15,63,13],[70,19,63,6],[71,0,64,5],[73,0,66,4],[73,10,66,10,"optionsFromListener"],[73,29,66,29],[73,32,66,32,"getOptionsFromListener"],[73,54,66,54],[73,56,66,4],[75,0,68,4],[75,10,68,8,"optionsFromListener"],[75,29,68,27],[75,34,68,32],[75,38,68,4],[75,40,68,38],[76,0,69,6],[76,15,69,13,"optionsFromListener"],[76,34,69,6],[77,0,70,5],[79,0,72,4],[79,13,72,11,"optionsRef"],[79,23,72,21],[79,24,72,22,"current"],[79,31,72,4],[80,0,73,3],[80,5,59,28],[80,7,73,5],[80,8,73,6,"navigation"],[80,18,73,5],[80,20,73,18,"getOptionsFromListener"],[80,42,73,5],[80,43,59,28],[80,44,59,2],[81,0,75,2,"React"],[81,4,75,2,"React"],[81,9,75,7],[81,10,75,8,"useEffect"],[81,19,75,2],[81,20,75,18],[81,32,75,24],[82,0,76,4],[82,13,76,11,"parentAddOptionsGetter"],[82,35,76,4],[82,55,76,11,"parentAddOptionsGetter"],[82,77,76,33],[82,78,76,36,"key"],[82,81,76,33],[82,83,76,42,"getCurrentOptions"],[82,100,76,33],[82,101,76,4],[83,0,77,3],[83,5,75,2],[83,7,77,5],[83,8,77,6,"getCurrentOptions"],[83,25,77,5],[83,27,77,25,"parentAddOptionsGetter"],[83,49,77,5],[83,51,77,49,"key"],[83,54,77,5],[83,55,75,2],[84,0,79,2],[84,8,79,8,"addOptionsGetter"],[84,24,79,24],[84,27,79,27,"React"],[84,32,79,32],[84,33,79,33,"useCallback"],[84,44,79,27],[84,45,80,4],[84,55,80,5,"key"],[84,58,80,4],[84,60,80,18,"getter"],[84,66,80,4],[84,68,80,62],[85,0,81,6,"optionsGettersFromChildRef"],[85,6,81,6,"optionsGettersFromChildRef"],[85,32,81,32],[85,33,81,33,"current"],[85,40,81,6],[85,41,81,41,"key"],[85,44,81,6],[85,48,81,48,"getter"],[85,54,81,6],[86,0,82,6,"optionsChangeListener"],[86,6,82,6,"optionsChangeListener"],[86,27,82,27],[87,0,84,6],[87,13,84,13],[87,25,84,19],[88,0,86,8],[88,15,86,15,"optionsGettersFromChildRef"],[88,41,86,41],[88,42,86,42,"current"],[88,49,86,15],[88,50,86,50,"key"],[88,53,86,15],[88,54,86,8],[89,0,87,8,"optionsChangeListener"],[89,8,87,8,"optionsChangeListener"],[89,29,87,29],[90,0,88,7],[90,7,84,6],[91,0,89,5],[91,5,79,27],[91,7,90,4],[91,8,90,5,"optionsChangeListener"],[91,29,90,4],[91,30,79,27],[91,31,79,2],[92,0,93,2],[92,11,93,9],[93,0,94,4,"addOptionsGetter"],[93,6,94,4,"addOptionsGetter"],[93,22,94,20],[93,24,94,4,"addOptionsGetter"],[93,40,93,9],[94,0,95,4,"getCurrentOptions"],[94,6,95,4,"getCurrentOptions"],[94,23,95,21],[94,25,95,4,"getCurrentOptions"],[95,0,93,9],[95,5,93,2],[96,0,97,1]],"functionMap":{"names":["<global>","useOptionsGetters","React.useCallback$argument_0","React.useEffect$argument_0","<anonymous>"],"mappings":"AAA;eCY;kDCe;GDO;kBEE;GFK;mDCE;GDa;8CCE;GDc;kBEE;GFE;ICG;aEI;OFI;KDC;CDQ"}},"type":"js/module"}]}