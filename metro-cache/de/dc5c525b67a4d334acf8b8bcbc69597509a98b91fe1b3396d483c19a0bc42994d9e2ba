{"dependencies":[{"name":"./AssetRegistry","data":{"isAsync":false,"locs":[{"start":{"line":15,"column":22},"end":{"line":15,"column":48}}]}},{"name":"./AssetSourceResolver","data":{"isAsync":false,"locs":[{"start":{"line":16,"column":28},"end":{"line":16,"column":60}}]}},{"name":"../NativeModules/specs/NativeSourceCode","data":{"isAsync":false,"locs":[{"start":{"line":31,"column":17},"end":{"line":31,"column":67}}]}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var AssetRegistry = _$$_REQUIRE(_dependencyMap[0], \"./AssetRegistry\");\n\n  var AssetSourceResolver = _$$_REQUIRE(_dependencyMap[1], \"./AssetSourceResolver\");\n\n  var _customSourceTransformer, _serverURL, _scriptURL;\n\n  var _sourceCodeScriptURL;\n\n  function getSourceCodeScriptURL() {\n    if (_sourceCodeScriptURL) {\n      return _sourceCodeScriptURL;\n    }\n\n    var sourceCode = global.nativeExtensions && global.nativeExtensions.SourceCode;\n\n    if (!sourceCode) {\n      sourceCode = _$$_REQUIRE(_dependencyMap[2], \"../NativeModules/specs/NativeSourceCode\").default;\n    }\n\n    _sourceCodeScriptURL = sourceCode.getConstants().scriptURL;\n    return _sourceCodeScriptURL;\n  }\n\n  function getDevServerURL() {\n    if (_serverURL === undefined) {\n      var sourceCodeScriptURL = getSourceCodeScriptURL();\n      var match = sourceCodeScriptURL && sourceCodeScriptURL.match(/^https?:\\/\\/.*?\\//);\n\n      if (match) {\n        _serverURL = match[0];\n      } else {\n        _serverURL = null;\n      }\n    }\n\n    return _serverURL;\n  }\n\n  function _coerceLocalScriptURL(scriptURL) {\n    if (scriptURL) {\n      if (scriptURL.startsWith('assets://')) {\n        return null;\n      }\n\n      scriptURL = scriptURL.substring(0, scriptURL.lastIndexOf('/') + 1);\n\n      if (!scriptURL.includes('://')) {\n        scriptURL = 'file://' + scriptURL;\n      }\n    }\n\n    return scriptURL;\n  }\n\n  function getScriptURL() {\n    if (_scriptURL === undefined) {\n      _scriptURL = _coerceLocalScriptURL(getSourceCodeScriptURL());\n    }\n\n    return _scriptURL;\n  }\n\n  function setCustomSourceTransformer(transformer) {\n    _customSourceTransformer = transformer;\n  }\n\n  function resolveAssetSource(source) {\n    if (typeof source === 'object') {\n      return source;\n    }\n\n    var asset = AssetRegistry.getAssetByID(source);\n\n    if (!asset) {\n      return null;\n    }\n\n    var resolver = new AssetSourceResolver(getDevServerURL(), getScriptURL(), asset);\n\n    if (_customSourceTransformer) {\n      return _customSourceTransformer(resolver);\n    }\n\n    return resolver.defaultAsset();\n  }\n\n  module.exports = resolveAssetSource;\n  module.exports.pickScale = AssetSourceResolver.pickScale;\n  module.exports.setCustomSourceTransformer = setCustomSourceTransformer;\n});","lineCount":93,"map":[[2,0,13,0],[4,0,15,0],[4,6,15,6,"AssetRegistry"],[4,19,15,19],[4,22,15,22,"require"],[4,33,15,29],[4,71,15,0],[6,0,16,0],[6,6,16,6,"AssetSourceResolver"],[6,25,16,25],[6,28,16,28,"require"],[6,39,16,35],[6,83,16,0],[8,0,20,0],[8,6,20,4,"_customSourceTransformer"],[8,30,20,0],[8,32,20,30,"_serverURL"],[8,42,20,0],[8,44,20,42,"_scriptURL"],[8,54,20,0],[10,0,22,0],[10,6,22,4,"_sourceCodeScriptURL"],[10,26,22,0],[12,0,23,0],[12,11,23,9,"getSourceCodeScriptURL"],[12,33,23,0],[12,36,23,43],[13,0,24,2],[13,8,24,6,"_sourceCodeScriptURL"],[13,28,24,2],[13,30,24,28],[14,0,25,4],[14,13,25,11,"_sourceCodeScriptURL"],[14,33,25,4],[15,0,26,3],[17,0,28,2],[17,8,28,6,"sourceCode"],[17,18,28,16],[17,21,29,4,"global"],[17,27,29,10],[17,28,29,11,"nativeExtensions"],[17,44,29,4],[17,48,29,31,"global"],[17,54,29,37],[17,55,29,38,"nativeExtensions"],[17,71,29,31],[17,72,29,55,"SourceCode"],[17,82,28,2],[19,0,30,2],[19,8,30,6],[19,9,30,7,"sourceCode"],[19,19,30,2],[19,21,30,19],[20,0,31,4,"sourceCode"],[20,6,31,4,"sourceCode"],[20,16,31,14],[20,19,31,17,"require"],[20,30,31,24],[20,92,31,17],[20,93,31,68,"default"],[20,100,31,4],[21,0,32,3],[23,0,33,2,"_sourceCodeScriptURL"],[23,4,33,2,"_sourceCodeScriptURL"],[23,24,33,22],[23,27,33,25,"sourceCode"],[23,37,33,35],[23,38,33,36,"getConstants"],[23,50,33,25],[23,53,33,51,"scriptURL"],[23,62,33,2],[24,0,34,2],[24,11,34,9,"_sourceCodeScriptURL"],[24,31,34,2],[25,0,35,1],[27,0,37,0],[27,11,37,9,"getDevServerURL"],[27,26,37,0],[27,29,37,36],[28,0,38,2],[28,8,38,6,"_serverURL"],[28,18,38,16],[28,23,38,21,"undefined"],[28,32,38,2],[28,34,38,32],[29,0,39,4],[29,10,39,10,"sourceCodeScriptURL"],[29,29,39,29],[29,32,39,32,"getSourceCodeScriptURL"],[29,54,39,54],[29,56,39,4],[30,0,40,4],[30,10,40,10,"match"],[30,15,40,15],[30,18,41,6,"sourceCodeScriptURL"],[30,37,41,25],[30,41,41,29,"sourceCodeScriptURL"],[30,60,41,48],[30,61,41,49,"match"],[30,66,41,29],[30,67,41,55],[30,86,41,29],[30,87,40,4],[32,0,42,4],[32,10,42,8,"match"],[32,15,42,4],[32,17,42,15],[33,0,44,6,"_serverURL"],[33,8,44,6,"_serverURL"],[33,18,44,16],[33,21,44,19,"match"],[33,26,44,24],[33,27,44,25],[33,28,44,24],[33,29,44,6],[34,0,45,5],[34,7,42,4],[34,13,45,11],[35,0,47,6,"_serverURL"],[35,8,47,6,"_serverURL"],[35,18,47,16],[35,21,47,19],[35,25,47,6],[36,0,48,5],[37,0,49,3],[39,0,50,2],[39,11,50,9,"_serverURL"],[39,21,50,2],[40,0,51,1],[42,0,53,0],[42,11,53,9,"_coerceLocalScriptURL"],[42,32,53,0],[42,33,53,31,"scriptURL"],[42,42,53,0],[42,44,53,60],[43,0,54,2],[43,8,54,6,"scriptURL"],[43,17,54,2],[43,19,54,17],[44,0,55,4],[44,10,55,8,"scriptURL"],[44,19,55,17],[44,20,55,18,"startsWith"],[44,30,55,8],[44,31,55,29],[44,42,55,8],[44,43,55,4],[44,45,55,43],[45,0,57,6],[45,15,57,13],[45,19,57,6],[46,0,58,5],[48,0,59,4,"scriptURL"],[48,6,59,4,"scriptURL"],[48,15,59,13],[48,18,59,16,"scriptURL"],[48,27,59,25],[48,28,59,26,"substring"],[48,37,59,16],[48,38,59,36],[48,39,59,16],[48,41,59,39,"scriptURL"],[48,50,59,48],[48,51,59,49,"lastIndexOf"],[48,62,59,39],[48,63,59,61],[48,66,59,39],[48,70,59,68],[48,71,59,16],[48,72,59,4],[50,0,60,4],[50,10,60,8],[50,11,60,9,"scriptURL"],[50,20,60,18],[50,21,60,19,"includes"],[50,29,60,9],[50,30,60,28],[50,35,60,9],[50,36,60,4],[50,38,60,36],[51,0,63,6,"scriptURL"],[51,8,63,6,"scriptURL"],[51,17,63,15],[51,20,63,18],[51,32,63,30,"scriptURL"],[51,41,63,6],[52,0,64,5],[53,0,65,3],[55,0,66,2],[55,11,66,9,"scriptURL"],[55,20,66,2],[56,0,67,1],[58,0,69,0],[58,11,69,9,"getScriptURL"],[58,23,69,0],[58,26,69,33],[59,0,70,2],[59,8,70,6,"_scriptURL"],[59,18,70,16],[59,23,70,21,"undefined"],[59,32,70,2],[59,34,70,32],[60,0,71,4,"_scriptURL"],[60,6,71,4,"_scriptURL"],[60,16,71,14],[60,19,71,17,"_coerceLocalScriptURL"],[60,40,71,38],[60,41,71,39,"getSourceCodeScriptURL"],[60,63,71,61],[60,65,71,38],[60,66,71,4],[61,0,72,3],[63,0,73,2],[63,11,73,9,"_scriptURL"],[63,21,73,2],[64,0,74,1],[66,0,76,0],[66,11,76,9,"setCustomSourceTransformer"],[66,37,76,0],[66,38,77,2,"transformer"],[66,49,76,0],[66,51,78,8],[67,0,79,2,"_customSourceTransformer"],[67,4,79,2,"_customSourceTransformer"],[67,28,79,26],[67,31,79,29,"transformer"],[67,42,79,2],[68,0,80,1],[70,0,86,0],[70,11,86,9,"resolveAssetSource"],[70,29,86,0],[70,30,86,28,"source"],[70,36,86,0],[70,38,86,63],[71,0,87,2],[71,8,87,6],[71,15,87,13,"source"],[71,21,87,6],[71,26,87,24],[71,34,87,2],[71,36,87,34],[72,0,88,4],[72,13,88,11,"source"],[72,19,88,4],[73,0,89,3],[75,0,91,2],[75,8,91,8,"asset"],[75,13,91,13],[75,16,91,16,"AssetRegistry"],[75,29,91,29],[75,30,91,30,"getAssetByID"],[75,42,91,16],[75,43,91,43,"source"],[75,49,91,16],[75,50,91,2],[77,0,92,2],[77,8,92,6],[77,9,92,7,"asset"],[77,14,92,2],[77,16,92,14],[78,0,93,4],[78,13,93,11],[78,17,93,4],[79,0,94,3],[81,0,96,2],[81,8,96,8,"resolver"],[81,16,96,16],[81,19,96,19],[81,23,96,23,"AssetSourceResolver"],[81,42,96,19],[81,43,97,4,"getDevServerURL"],[81,58,97,19],[81,60,96,19],[81,62,98,4,"getScriptURL"],[81,74,98,16],[81,76,96,19],[81,78,99,4,"asset"],[81,83,96,19],[81,84,96,2],[83,0,101,2],[83,8,101,6,"_customSourceTransformer"],[83,32,101,2],[83,34,101,32],[84,0,102,4],[84,13,102,11,"_customSourceTransformer"],[84,37,102,35],[84,38,102,36,"resolver"],[84,46,102,35],[84,47,102,4],[85,0,103,3],[87,0,104,2],[87,11,104,9,"resolver"],[87,19,104,17],[87,20,104,18,"defaultAsset"],[87,32,104,9],[87,34,104,2],[88,0,105,1],[90,0,107,0,"module"],[90,2,107,0,"module"],[90,8,107,6],[90,9,107,7,"exports"],[90,16,107,0],[90,19,107,17,"resolveAssetSource"],[90,37,107,0],[91,0,108,0,"module"],[91,2,108,0,"module"],[91,8,108,6],[91,9,108,7,"exports"],[91,16,108,0],[91,17,108,15,"pickScale"],[91,26,108,0],[91,29,108,27,"AssetSourceResolver"],[91,48,108,46],[91,49,108,47,"pickScale"],[91,58,108,0],[92,0,109,0,"module"],[92,2,109,0,"module"],[92,8,109,6],[92,9,109,7,"exports"],[92,16,109,0],[92,17,109,15,"setCustomSourceTransformer"],[92,43,109,0],[92,46,109,44,"setCustomSourceTransformer"],[92,72,109,0]],"functionMap":{"names":["<global>","getSourceCodeScriptURL","getDevServerURL","_coerceLocalScriptURL","getScriptURL","setCustomSourceTransformer","resolveAssetSource"],"mappings":"AAA;ACsB;CDY;AEE;CFc;AGE;CHc;AIE;CJK;AKE;CLI;AMM;CNmB"}},"type":"js/module"}]}